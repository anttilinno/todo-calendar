---
phase: 06-themes
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - internal/theme/theme.go
  - internal/config/config.go
autonomous: true

must_haves:
  truths:
    - "Theme struct defines 14 semantic color roles covering all UI elements"
    - "Four preset themes exist: Dark, Light, Nord, Solarized"
    - "ForName returns Dark theme for unknown/empty theme names"
    - "Config has Theme field defaulting to dark"
  artifacts:
    - path: "internal/theme/theme.go"
      provides: "Theme struct with 14 color fields, 4 preset constructors, ForName selector"
      exports: ["Theme", "Dark", "Light", "Nord", "Solarized", "ForName"]
    - path: "internal/config/config.go"
      provides: "Theme field in Config struct"
      contains: "Theme string"
  key_links:
    - from: "internal/theme/theme.go"
      to: "lipgloss.Color"
      via: "all theme fields are lipgloss.Color type"
      pattern: "lipgloss\\.Color"
    - from: "internal/config/config.go"
      to: "internal/theme/theme.go"
      via: "Theme string field maps to ForName input"
      pattern: "Theme.*string"
---

<objective>
Create the theme data layer: a Theme struct with 14 semantic color roles and four preset constructors (Dark, Light, Nord, Solarized), plus the config field to select a theme.

Purpose: Establishes the color data that Plan 02 will wire into all UI components. Separating this ensures the Theme API is clean before integration begins.
Output: `internal/theme/theme.go` with complete theme definitions, updated `internal/config/config.go` with Theme field.
</objective>

<execution_context>
@/home/antti/.claude/get-shit-done/workflows/execute-plan.md
@/home/antti/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/06-themes/06-RESEARCH.md
@internal/config/config.go
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create theme package with struct and 4 presets</name>
  <files>internal/theme/theme.go</files>
  <action>
Create `internal/theme/theme.go` in a new `theme` package with:

1. **Theme struct** with 14 `lipgloss.Color` fields (semantic roles, not component names):
   - `BorderFocused`, `BorderUnfocused` (panel borders)
   - `HeaderFg`, `WeekdayFg`, `TodayFg`, `TodayBg`, `HolidayFg`, `IndicatorFg` (calendar)
   - `AccentFg`, `MutedFg`, `CompletedFg`, `EmptyFg` (todolist)
   - `NormalFg`, `NormalBg` (general)

2. **Four preset constructor functions**, each returning a populated Theme:
   - `Dark()` -- maps current hardcoded colors: BorderFocused="#5F5FD7" (ANSI 62), BorderUnfocused="#585858" (ANSI 240), HolidayFg="#AF0000" (ANSI 1), AccentFg="#5F5FD7", MutedFg/CompletedFg/EmptyFg="#585858", HeaderFg/WeekdayFg/TodayFg/TodayBg/IndicatorFg/NormalFg/NormalBg="" (terminal default)
   - `Light()` -- BorderFocused="#5F5FD7", BorderUnfocused="#BCBCBC", HeaderFg="#303030", WeekdayFg="#8A8A8A", TodayFg="#FFFFFF", TodayBg="#5F5FD7", HolidayFg="#D70000", IndicatorFg="#005FAF", AccentFg="#5F5FD7", MutedFg="#8A8A8A", CompletedFg="#BCBCBC", EmptyFg="#8A8A8A", NormalFg="#303030", NormalBg=""
   - `Nord()` -- BorderFocused="#88C0D0", BorderUnfocused="#4C566A", HeaderFg="#ECEFF4", WeekdayFg="#4C566A", TodayFg="#2E3440", TodayBg="#88C0D0", HolidayFg="#BF616A", IndicatorFg="#A3BE8C", AccentFg="#88C0D0", MutedFg="#4C566A", CompletedFg="#4C566A", EmptyFg="#4C566A", NormalFg="#D8DEE9", NormalBg=""
   - `Solarized()` -- BorderFocused="#268BD2", BorderUnfocused="#586E75", HeaderFg="#93A1A1", WeekdayFg="#586E75", TodayFg="#FDF6E3", TodayBg="#268BD2", HolidayFg="#DC322F", IndicatorFg="#859900", AccentFg="#268BD2", MutedFg="#586E75", CompletedFg="#586E75", EmptyFg="#586E75", NormalFg="#839496", NormalBg=""

3. **`ForName(name string) Theme`** function: switch on `strings.ToLower(strings.TrimSpace(name))`, return Light/Nord/Solarized for matching names, default to Dark() for unknown/empty values.

Use hex color strings for all values (not ANSI numbers). Empty string `""` means terminal default. Include brief comments with color names (e.g. "// nord8 frost").
  </action>
  <verify>Run `cd /home/antti/Repos/Misc/todo-calendar && go build ./internal/theme/` -- must compile with no errors.</verify>
  <done>theme.go exports Theme struct, Dark(), Light(), Nord(), Solarized(), ForName(). All hex values match RESEARCH.md palettes.</done>
</task>

<task type="auto">
  <name>Task 2: Add Theme field to config</name>
  <files>internal/config/config.go</files>
  <action>
Add `Theme string` field with `toml:"theme"` tag to the Config struct. Set default to `"dark"` in DefaultConfig(). No validation needed here -- ForName() handles unknown values by returning Dark.

The struct should become:
```go
type Config struct {
    Country        string `toml:"country"`
    FirstDayOfWeek string `toml:"first_day_of_week"`
    Theme          string `toml:"theme"`
}
```

And DefaultConfig:
```go
func DefaultConfig() Config {
    return Config{
        Country:        "us",
        FirstDayOfWeek: "sunday",
        Theme:          "dark",
    }
}
```
  </action>
  <verify>Run `cd /home/antti/Repos/Misc/todo-calendar && go build ./internal/config/` -- must compile. Run `go vet ./internal/config/` -- no issues.</verify>
  <done>Config struct has Theme field with "dark" default. Existing config files without theme field will get "dark" via DefaultConfig.</done>
</task>

</tasks>

<verification>
```bash
cd /home/antti/Repos/Misc/todo-calendar
go build ./internal/theme/
go build ./internal/config/
go vet ./internal/...
```
All three commands pass with no errors.
</verification>

<success_criteria>
- internal/theme/theme.go exists with Theme struct (14 fields), 4 presets, ForName()
- internal/config/config.go has Theme string field defaulting to "dark"
- Both packages compile independently
- go vet passes on all internal packages
</success_criteria>

<output>
After completion, create `.planning/phases/06-themes/06-01-SUMMARY.md`
</output>

---
phase: 17-visual-polish-help
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - internal/todolist/styles.go
  - internal/todolist/model.go
autonomous: true

must_haves:
  truths:
    - "Todo items have visible breathing room -- blank line between each item"
    - "Section headers (month name, Floating) have a separator line underneath and spacing above"
    - "Checkbox [ ] and [x] are colored distinctly from todo text"
    - "Completed todo checkbox keeps its own color, strikethrough applies only to text"
  artifacts:
    - path: "internal/todolist/styles.go"
      provides: "Separator, Checkbox, CheckboxDone styles"
      contains: "Separator"
    - path: "internal/todolist/model.go"
      provides: "Updated renderTodo and View with visual polish"
      contains: "CheckboxDone"
  key_links:
    - from: "internal/todolist/styles.go"
      to: "internal/todolist/model.go"
      via: "m.styles.Separator, m.styles.Checkbox, m.styles.CheckboxDone"
      pattern: "m\\.styles\\.(Separator|Checkbox|CheckboxDone)"
---

<objective>
Add visual polish to the todo list pane: spacing between items, separator lines under section headers, and styled checkboxes.

Purpose: Todo items are currently a dense wall of text. This plan adds vertical breathing room, header separators, and colored checkboxes so the pane is easy to scan.
Output: Updated todolist rendering with VIS-01, VIS-02, VIS-03 requirements met.
</objective>

<execution_context>
@/home/antti/.claude/get-shit-done/workflows/execute-plan.md
@/home/antti/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@internal/todolist/styles.go
@internal/todolist/model.go
@internal/theme/theme.go
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add Separator, Checkbox, CheckboxDone styles</name>
  <files>internal/todolist/styles.go</files>
  <action>
Add three new fields to the Styles struct and initialize them in NewStyles:

1. `Separator lipgloss.Style` -- styled with `t.MutedFg` foreground. Used for thin horizontal rule under section headers.
2. `Checkbox lipgloss.Style` -- styled with `t.AccentFg` foreground. Used for unchecked `[ ]`.
3. `CheckboxDone lipgloss.Style` -- styled with `t.CompletedCountFg` foreground. Used for checked `[x]`.

The Styles struct currently has 6 fields (SectionHeader, Completed, Cursor, Date, Empty, BodyIndicator). Add the 3 new fields after BodyIndicator.

In NewStyles, add:
```go
Separator:    lipgloss.NewStyle().Foreground(t.MutedFg),
Checkbox:     lipgloss.NewStyle().Foreground(t.AccentFg),
CheckboxDone: lipgloss.NewStyle().Foreground(t.CompletedCountFg),
```

Note: `CompletedCountFg` is already defined in all 4 themes (Dark, Light, Nord, Solarized) as a green-ish color. `AccentFg` is defined in all themes as an accent color. No theme changes needed.
  </action>
  <verify>Run `go build ./...` -- must compile without errors.</verify>
  <done>Styles struct has Separator, Checkbox, CheckboxDone fields initialized from theme colors.</done>
</task>

<task type="auto">
  <name>Task 2: Update View and renderTodo for visual polish</name>
  <files>internal/todolist/model.go</files>
  <action>
Three changes in this file:

**VIS-01: Breathing room between todo items.**
In the `View()` method, inside the `case todoItem:` block (currently at ~line 786-789), add an extra blank line AFTER each todo item:
```go
case todoItem:
    isSelected := selectableIdx < len(selectable) && selectableIdx == m.cursor && m.focused
    m.renderTodo(&b, item.todo, isSelected)
    selectableIdx++
    b.WriteString("\n") // VIS-01: breathing room between items
```

**VIS-02: Section header separators.**
In the `View()` method, inside the `case headerItem:` block (currently at ~line 778-780), add:
- An empty line BEFORE non-first headers (check with a variable or idx > 0 by tracking whether we've written any items before)
- A thin separator line AFTER each header

Replace the current headerItem rendering:
```go
case headerItem:
    if b.Len() > 0 {
        b.WriteString("\n") // spacing before non-first headers
    }
    b.WriteString(m.styles.SectionHeader.Render(item.label))
    b.WriteString("\n")
    b.WriteString(m.styles.Separator.Render("──────────"))
    b.WriteString("\n")
```

Use `b.Len() > 0` to detect non-first header (the builder is empty only for the very first item). The separator is a fixed 10-character thin line using Unicode box-drawing horizontal char (U+2500). Keep it short and fixed-width -- don't try to fill the pane width.

**VIS-03: Styled checkboxes with separate text styling.**
Rewrite `renderTodo()` (currently at ~line 850-879) to style checkbox separately from text:

```go
func (m Model) renderTodo(b *strings.Builder, t *store.Todo, selected bool) {
    // Cursor indicator
    if selected {
        b.WriteString(m.styles.Cursor.Render("> "))
    } else {
        b.WriteString("  ")
    }

    // Styled checkbox (VIS-03)
    if t.Done {
        b.WriteString(m.styles.CheckboxDone.Render("[x]"))
    } else {
        b.WriteString(m.styles.Checkbox.Render("[ ]"))
    }
    b.WriteString(" ")

    // Text content -- build separately from checkbox
    text := t.Text
    if t.Done {
        text = m.styles.Completed.Render(text)
    }

    b.WriteString(text)

    // Body indicator (after text, not affected by completed styling)
    if t.HasBody() {
        b.WriteString(" " + m.styles.BodyIndicator.Render("[+]"))
    }

    // Date (after text, not affected by completed styling)
    if t.HasDate() {
        b.WriteString(" " + m.styles.Date.Render(config.FormatDate(t.Date, m.dateLayout)))
    }

    b.WriteString("\n")
}
```

Key changes from current code:
1. Checkbox is styled with `m.styles.Checkbox` or `m.styles.CheckboxDone` -- NOT wrapped in `Completed.Render()`
2. `Completed.Render()` is applied ONLY to the text portion, not to checkbox+text together
3. Body indicator and date are rendered after the text, outside any completed styling
4. The space between checkbox and text is a plain space, not part of any styled string

This avoids the pitfall where `Completed.Render(check + text)` applies strikethrough to the checkbox.
  </action>
  <verify>Run `go build ./...` -- must compile without errors. Run `go vet ./...` for good measure.</verify>
  <done>Todo items have blank lines between them, headers have separator lines, checkboxes are colored independently from text.</done>
</task>

</tasks>

<verification>
1. `go build ./...` compiles without errors
2. `go vet ./...` passes
3. Visual inspection: run the app and verify:
   - Todo items have blank line spacing between them
   - Section headers have "──────────" separator line below
   - Floating header has extra space above it
   - Unchecked `[ ]` is accent-colored, checked `[x]` is green-ish
   - Completed todo text has strikethrough but checkbox keeps its own color
   - Body indicator `[+]` and date remain visible on completed items
</verification>

<success_criteria>
- VIS-01: Blank line between todo items provides scanning room
- VIS-02: Section headers have separator lines underneath and spacing before non-first headers
- VIS-03: Checkbox styling is distinct from text; completed items show styled checkbox + strikethrough text
- All 4 themes render correctly (Dark, Light, Nord, Solarized)
</success_criteria>

<output>
After completion, create `.planning/phases/17-visual-polish-help/17-01-SUMMARY.md`
</output>
